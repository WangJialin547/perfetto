/*
 * Copyright (C) 2025 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

syntax = "proto2";

package perfetto.protos;

// Kswapd stats on Android.
// This message aggregates the activity of kswapd across all CPUs.
message AndroidKswapdMetric {
  // Represents the kswapd activity on a single CPU.
  message KswapdCpuStats {
    // The CPU index.
    int32 cpu = 1;

    // The total duration of all tasks scheduled on this CPU over the
    // trace period, in nanoseconds.
    int64 total_cpu_duration_ns = 2;

    // The total duration that the 'kswapd' thread was running on this CPU
    // over the trace period, in nanoseconds.
    int64 kswapd_on_cpu_duration_ns = 3;

    // The percentage of this CPU's total time that was spent running 'kswapd'.
    // This is a derived value:
    // (kswapd_on_cpu_duration_ns / total_cpu_duration_ns) * 100.0
    double kswapd_on_cpu_percentage = 4;
  }

  // Contains statistics for kswapd on each individual CPU.
  repeated KswapdCpuStats cpu_stats = 1;
}
